# 3. 네트워크 통신하기

## 1. 유니캐스트, 멀티캐스트, 브로드캐스트, 애니캐스트
* 데이터를 전송할 때 사용하는 통신 방식
  * 유니캐스트
    * 출발지와 목적지가 명확히 하나로 정해져 있는 1:1 통신 방식
    * 사용되는 대부분의 통신은 유니캐스트 방식을 사용
  * 브로드캐스트
    * 목적지 주소가 모든으로 표기되어 있는 통신 방식
    * 유니캐스트로 통신하기 전, 상대방의 정확한 위치를 알기 위해 사용
    * 로컬 네트워크 내에서 모든 호스트에 패킷을 전달해야 할 때 사용
  * 멀티캐스트
    * 멀티캐스트 그룹 주소를 이용해 해당 그룹에 속한 다수의 호스트로 패킷을 전송하기 위한 통신 방식
    * 단방향으로 다수에게 동시에 같은 내용을 전달해야 할 때 사용
  * 애니캐스트
    * 애니캐스트 주소가 같은 호스트들 중에서 가장 가깝거나 가장 효율적으로 서비스할 수 있는 호스트와 통신하는 방식
<img width="862" alt="스크린샷 2021-04-16 오후 9 02 31" src="https://user-images.githubusercontent.com/52665200/115021549-10267a80-9ef7-11eb-9d58-6b09a2a15935.png">

## 2. MAC 주소
* MAC (Media Access Control)
  * 2계층에서 통신을 위해 네트워크 인터페이스에 할당된 고유 식별자
  * 네트워크에 접속하는 모든 장비에는 MAC 주소라는 물리적인 주소가 있어야 하고, 이를 통해 통신한다.

1. MAC 주소 체계
* 주소가 하드웨어에 고정되어 주소를 변경할 수 없다.
<img width="450" alt="스크린샷 2021-04-16 오후 9 21 13" src="https://user-images.githubusercontent.com/52665200/115023375-ad82ae00-9ef9-11eb-970b-6c962543d941.png">
* OUI : IEEE 제조사에 할당하는 부분
* UAA : 각 제조사에서 네트워크 구성 요소에 할당하는 부분

2. MAC 주소 동작
* NIC는 자신의 MAC 주소를 가지고 있고 전기 신호가 들어오면 2계층에서 데이터 형태(패킷)로 변환하여 내용을 구분한 후 도착지 MAC 주소를 확인한다.
  * 만약 도착지 MAC 주소가 자신의 주소와 다르면 그 패킷을 폐기한다.
  * 목적지 주소가 자기 자신이나 브로드캐스트, 멀티캐스트와 같은 그룹 주소이면, 처리해야 할 주소로 인지해 패킷 정보를 상위 계층으로 넘겨준다.

3. IP 주소
* IP 주소 및 프로토콜 스택의 3계층 주소의 특징
  1. 사용자가 변경 가능한 논리 주소
  2. 주소에 레벨이 존재 (그룹을 의미하는 네트워크 주소와 호스트 주소로 나뉜다)

1. IP 주소 체계
* v4(32비트), v6(128비트) 두 체계가 사용
* IPv4 주소는 4개의 옥텟으로 나뉘며, "."으로 구분된다.
<img width="564" alt="스크린샷 2021-04-16 오후 9 45 26" src="https://user-images.githubusercontent.com/52665200/115026115-10c20f80-9efd-11eb-95bf-f78e0b7df676.png">
* MAC 주소처럼 IP주소도 **네트워크 주소**와 **호스트 주소** 두 부분으로 나뉜다.
  * 네트워크 주소 : 호스트들을 모은 네트워크를 지칭하는 주소
  * 호스트 주소 : 하나의 네트워크 내에 존재하는 호스트를 구분하기 위한 주소
* 네트워크 주소와 호스트 주소를 나누는 경계점이 따로 고정되어있지 않다.
  * 필요한 호스트 IP 개수에 따라 네트워크의 크기를 다르게 할 수 있는 **클래스** 개념을 도입

2. 클래스풀과 클래스리스
* 클래스풀 : 클래스 기반의 IP 주소 체계
* 클래스리스 네트워크의 등장
  * 기하급수적으로 늘어나는 IP 주소 요구 때문에 기존의 클래스풀의 한계가 드러남
  * 서브넷 마스크(Subnet Mask) : 클래스리스 네트워크에서 별도로 네트워크와 호스트 주소를 나누는 구분자
    * 비트 단위 / 10진수 표현 방법이 있다.

3. 서브네팅(Subnetting)
* 원래 부여된 클래스의 기준을 무시하고 새로운 네트워크-호스트 구분 기준을 사용자가 정해 원래 클래스풀 단위의 네트워크보다 더 쪼개 사용하는 것
* 서브네팅을 고민해야 하는 경우
  * 네트워크 사용자 입장
    * 네트워크에서 사용할 수 있는 IP 범위 파악
    * 기본 게이트웨이와 서브넷 마스크 설정이 제대로 되어 있는지 확인
  * 네트워크 설계자 입장
    * 네트워크 설계 시 네트워크 내에 필요한 단말을 고려한 네트워크 범위 설계

* 네트워크 사용자의 서브네팅
  * 자신이 속한 네트워크의 유효 범위를 파악하는 방법
    1. 내 IP를 2진수로 표현
    2. 서브넷 마스크를 2진수로 표현
    3. 2진수 AND 연산으로 서브네팅된 네트워크 주소를 알아낸다.
    4. 호스트 주소 부분을 2진수 1로 모두 변경해 브로드캐스트 주소를 알아낸다.
    5. 유효 IP 범위를 파악한다. 서브네팅된 네트워크 주소+1은 유효 IP 중 가장 작은 IP이다.
    6. 브로드캐스트 주소-1은 유효 IP 중 가장 큰 IP이다.
    7. 2진수로 연산되어 있는 결과값을 10진수로 변환한다.

* 네트워크 설계자 입장
  * 네트워크 할당 예시
    1. 서브넷된 하나의 네트워크에 12개 IP를 할당해야 한다.
    2. 네트워크는 2진수의 배수로 커지므로, 4, 8, 16, 32, 64, 128, 256개 단위로 네트워크를 할당할 수 있다. 12개 IP를 수용할 수 있는 가장 작은 네트워크는 16개이므로 16개짜리 네트워크를 할당한다.
    3. 16개짜리 네트워크 12개를 확보한다. 16의 배수를 0부터 나열해 네트워크 주소를 확인한다.
    4. 총 16개 네트워크 중 12개 네트워크를 할당한다.

* 네트워크 설계 장단점
  * 잘 설계된 네트워크
    * 라우터가 관리하는 경로가 적고 관리하기 편하다.
    * 네트워크 전체의 성능이 향상된다.
    * IP 주소가 낭비되므로, IP를 여유있게 사용할 수 있는 사설 IP 네트워크 대역으로 네트워크를 설계해야 한다.
  * 잘못 걸계된 네트워크
    * 실제로 존재하는 네트워크 수만큼 Core 라우터가 모든 경로를 알고 있어야 한다.
