# 네트워크 연결과 구성 요소

## 1. 네트워크 연결 구분 
* 네트워크는 규모와 관리 범위에 따라 LAN, MAN, WAN으로 구분된다.
<img width="658" alt="스크린샷 2021-04-07 오전 1 23 20" src="https://user-images.githubusercontent.com/52665200/113744650-db206800-973f-11eb-8e93-45fa83ed1cdb.png">

1. LAN (Local Area Network)
  * 홈 네트워크용과 사무실용 네트워크처럼 비교적 소규모의 네트워크
  * 먼 거리의 통신이 필요 없기 때문에, 비교적 간단한 장비로 연결된 네트워크
  * 현재는 대부분 **이더넷** 기반 전송 기술을 사용

2. MAN (Metro Area Network)
  * 한 도시 정도를 연결하고 관리하는 네트워크

3. WAN (Wide Area Network)
  * 먼 거리에 있는 네트워크를 연결하기 위해 사용한다.
  * 멀리 떨어진 LAN을 서로 연결하거나 인터넷에 접속하기 위한 네트워크가 WAN에 해당한다.
  * 특별한 경우가 아니면 직접 구축할 수 없는 범위의 네트워크이므로, 대부분 통신사업자로부터 회선을 임대하여 사용한다.

## 2. 네트워크 회선
1. 인터넷 회선
* 인터넷 접속을 위해 통신사업자와 연결하는 회선을 **인터넷 회선**이라고 한다.
* 가입자와 통신사업자 간에 직접 연결되는 구조가 아니라 **전송 선로 공유 기술**을 사용한다.
  * 아파트 광랜은 내부 선로가 직접 연결되는 구조여서 인터넷 전용 회선처럼 보이지만, 아파트에서 통신사업자까지 연결한 회선을 아파트 가입자가 공유하는 구조이다.
  * 전송 선로를 공유하기 때문에, 주변 사용량에 따라 속도가 느려질 수 있다.

2. 전용 회선
* 가입자와 통신사업자 간에 대역폭을 보장해주는 서비스
* 가입자와 통신사업자 간에는 전용 케이블로 연결되어 있고, 통신사업자 내부에서는 TDM(시분할 다중화)같은 기술로 마치 직접 연결된 것처럼 통신 품질을 보장해줍니다.

* 음성 전송 기술 기반(저속 회선)
  * 64kbps 단위로 구분되어 사용
  * 작은 기본 단위를 묶어 회선 접속 속도를 높이는 방법으로 발전되어 온 기술로, 오랫동안 사용되었다.
  * 주로 높은 속도가 필요하지 않거나 높은 신뢰성을 보장해야 할 때 사용
  * 이터넷 기반의 광 전송 기술이 신뢰할 정도의 수준으로 발전하여 점점 사용 빈도가 줄어가고 있다.
  * 원격지 전송 기술로 변환할 수 있는 라우터가 필요
* 메트로 이더넷(고속 회선)
  * 고속 연결은 대부분 광케이블 기반의 이더넷을 사용
  * 가입자와 통신사업자 간의 접속 기술은 이더넷을 사용하고, 통신사업자 내부에서는 이런 개별 가입자를 묶어 통신할 수 있는 다른 고속 통신 기술을 사용
    * 통신 기법이 다른 이유는 통신사업자는 여러 가입자를 구분하고 가입자 트래픽을 고속으로 전송하는 것이 중요하기 때문!
  * 다양한 가입자 접속 기술을 하나의 기술로 통합하기 위한 기술이 사용된다.

* LLC(Link Loss Carry Forward)
  * 한쪽 링크가 다운되면 이를 감지해 반대쪽 링크도 다운시키는 기능
  * 전용 회선을 이더넷으로 그성할 때, 회선사에서 LLCF를 설정하지 않으면 전용 회선이 한 사이트에서 다운되더라도 반대쪽 사이트에서는 회선이 그대로 살아있는 것처럼 보이므로 반드시 회선 개통 후 회선사에서 LLCF 설정이 되어 있는지 확인해야 합니다.

3. 인터넷 전용 회선
* 인터넷 연결 회선에 대한 통신 대역폭을 보장해주는 상품
* 가입자가 통신사업자와 연결되고 이 연결을 다시 인터넷과 연결되는 구조
* 가입자가 일반가정에서 사용하는 접속 기술과는 달리, 다른 가입자와 경쟁하지 않고 통신사업자와 가입자 간의 연결 품질을 보장해준다.

4. VPN (Virtual Private Network)
* 물리적으로는 전용선이 아니지만 가상으로 직접 연결한 것 같은 효과가 나도록 만들어주는 네트워크 기술

* 통신사업자 VPN
  * 전용선은 연결 거리가 늘어날수록 비용이 증가하기 때문에, 도시 내의 전용선 연결보다 도시나 해외 연결 전용선 비용이 더 비싸다.
  * 전용선은 사용 가능한 대역폭을 보장해주지만 가입자가 계약된 대역폭을 항상 100% 사용하는 것이 아니어서 비용이 낭비될 수 있다.
  * 비용 낭비를 줄이기 위해, 먼 거리와 연결하더라도 비용을 줄이기 위해 통신사업자가 직접 가입자를 구분할 수 있는 VPN 기술을 사용한다.
  * 여러 가입자가 하나의 망에 접속해 통신하므로 공용 회선을 함께 이용하게되어 비용이 낮아진다.
  * 전용 회선 비용은 거리와 속도의 영향을 받지만, MPLS VPN 회선은 거리보다 속도의 영향을 받으므로 거리가 멀어질수록 MPLS와 같은 공용망 기술 사용이 비용을 낮추는 데 도움이 된다.
<img width="658" alt="스크린샷 2021-04-09 오전 1 18 57" src="https://user-images.githubusercontent.com/52665200/114061589-9298b400-98d1-11eb-82df-d1f996cefe9b.png">

* 가입자 VPN
  * 일반 사용자가 주로 사용하는 VPN 기술
  * 일반 인터넷망을 이용해 사용자가 직접 가상 전용 네트워크를 구성할 수 있다.

5. DWDM (Dense Wavelength Division Multiplex : 파장 분할 다중화)
* 먼 거리를 통신할 때 케이블 포설 비용이 매우 많이 들고 관리가 어려운 문제를 극복하기 위해 개발
* WDM과 DWDM 기술은 하나의 광케이블에 다른 파장의 빛을 통해 여러 채널을 만드는 동시에 많은 데이터를 전송할 수 있다.
  * DWDM 전송 기술은 기존 WDM보다 더 많은 채널을 이용하는 기술
  * 먼 거리를 통신할 때 주로 사용되지만 최근 일반가정에서 사용하는 기가 인터넷에서도 사용되고 있다.
* 기가 인터넷은 FTTH(Fibre To The Home)가 사용되고, 구축 방식에 따라 PTP, AON, PON 형태로 구분된다.
  * PTP(Point-To-Point) : 가입자가 통신사업자 간에 케이블을 직접 포설한다.
  * AON(Active Optical Network) : 광신호 분리장비에 전기가 필요한 스위치와 같은 장비가 사용된다.
  * PON : 전기 인입 없이 광신호를 분리해 가입자와 통신사업자 간의 케이블을 줄일 수 있다.
  * 가입자들이 하나의 회선을 공유하여 인터넷 속도가 느려질 수 있어 DWDM 기술을 접목한다.

## 3. 네트워크 구성 요소
1. 네트워크 인터페이스 카드(NIC)
* 흔히 **랜 카드**라고 부르는 부품의 정식 명칭
* 컴퓨터를 네트워크에 연결하기 위한 하드웨어 장치
* NIC의 주요 역할
  * 직렬화 (Serialization)
    * NIC는 전기적 신호를 데이터 신호 형태로 또는 데이터 신호 형태를 전기적 신호 형태로 변환해준다.
    * 네트워크 카드 외부 케이블에서는 전기 신호 형태로 데이터가 전송
  * MAC 주소
    * NIC는 MAC주소를 가지고 있다.
    * 받은 패킷의 도착지 주소가 자신의 MAC주소가 아니면 폐기하고, 주소가 맞으면 시스템 내부에서 처리할 수 있도록 전달
  * 흐름 제어 (Flow Control)
    * 패킷 기반 네트워크에서는 다양한 통신이 하나의 채널을 이용하므로 이미 통신 중인 데이터 처리 때문에 새로운 데이터를 받지 못할 수 있다.
    * 이런 현상으로 인한 데이터 유실 방지를 위해 데이터를 받지 못하는 상황에는 상대방에게 통신 중지를 요청할 수 있는데, 이를 **흐름 제어**라고 한다.

2. 케이블과 커넥터
* 회사 네트워크에 접속하거나 서버를 네트워크와 연결하는 것과 같이 신뢰도 높은 통신이 필요한 경우에는 아직도 유선이 사용되고 있다.

* 이더넷 네트워크 표준
  * 현재 가장 많이 사용되는 네트워크 기술
  * 대중화되어 있는 이더넷 표준은 '기가비트 이더넷'과 '10기가비트 이더넷'이다.
    * 일반 PC와 같은 종단은 기가비트 이더넷
    * 데이터 센터의 서버와 같은 종단은 기가비트나 10기가비트 이더넷을 주로 사용한다.
  * 대중적으로 많이 사용하는 표준 3가지
    * 1000BASE-T/10GBASE-T : 트위스티드 페어 케이블을 이용하는 기가 이더넷 표준
    * 1000BASE-SX/10GBASE-SR : 멀티모드 광케이블을 사용하고 비교적 짧은 거리를 보낼 수 있는 이더넷 표준
    * 1000BASE-LX/10GBASE-LR : 싱글보드 광케이블을 사용하고 비교적 긴 거리를 보낼 수 있는 이더넷 표준
    * 1000BASE-T 명칭의 의미
      * 앞 숫자(1000) : 1000Mbps 속도로 통신할 수 있는 네트워크
      * 중간 문자(BASE) : 채널의 종류 (BASE : 단일채널 통신 / BROAD : 다채널 통신)
      * 마지막 문자(T) : 케이블 타입 (T : 트위스티드 페어 케이블)

* 케이블, 커넥터 구조
  * 케이블은 물리적으로 케이블 본체, 커넥터, 트랜시버와 같은 여러 요소로 나뉜다.
  * 케이블 본체는 트위스티드 페어, 동축, 광케이블로 나뉘고 케이블 본체의 종류에 따라 커넥터와 트랜시버의 종류도 달라진다.
  * 트위스티드 페어 케이블의 경우, 커넥터와 케이블 본체가 하나로 구성되어 있고 별도의 트랜시버가 없는 경우가 많다.
  * 광케이블은 다양한 속도와 거리를 지원해야 하므로 트랜시버, 커넥터와 케이블을 분리하는 경우가 많다.

* 케이블 - 트위스티드 페어 케이블(Twisted Pair)
  * 가장 흔히 사용하는 케이블
  * 쉴드를 장착한 STP/FTP 케이블과 쉴드가 없는 UTP 케이블이 있다.
    * 쉴드는 내부 및 외부 간섭을 잘 막아준다.
  * RJ-45 커넥터를 이용하고 케이블 본체와 함께 연결되어 분리할 수 없다.
  * 이 케이블을 컴퓨터나 서버에 있는 랜포트에 끼우면 네트워크에 연결된다.
  * 트위스티드 페어 케이블은 요구되는 속도와 통신 거리에 따라 다양한 스펙이 있고 환경에 따라 적절히 선택해야 한다.
    * 카테고리 단위로 케이블 등급을 나눌 수 있다.
    * 가장 많이 사용하는 케이블은 카테고리 5E 케이블

* 케이블 - 동축 케이블
  * 과거에는 LAN 구간에도 사용되었지만 다루기 힘들고 고가이므로 잘 사용되지 않고 케이블 TV나 인터넷 연결을 위해서만 사용되었다.
  * 최근 10G 이상의 고속 연결을 위해 트랜시버를 통합한 DAC(Direct Attach Copper Cable)을 많이 사용
    * DAC는 동축 케이블 종류 중 하나

* 케이블 - 광케이블
  * 일반적으로 다른 구리선보다 신뢰도가 높고 더 먼 거리까지 통신할 수 있어, 높은 대역폭을 요구하거나 먼 거리를 통신해야 하는 네으워크 장비 간의 통신에 주로 사용되었다.
  * 저항 때문에 생기는 감쇄와 주위 자기장의 간섭으로부터 비교적 자유롭다.
  * 싱글모드, 멀티모드 2가지로 나눌 수 있다.
    * 싱글모드
      * 먼 거리 통신을 지원하기 위해 케이블 굵기가 매우 가늘고 신호를 보내는 광원으로 레이저를 사용 
      * 레이저는 다른 빛에 비해 먼 거리를 퍼지지 않고 직진하는 성질이 있다
      * 케이블의 색은 노란색
    * 멀티모드
      * 싱글 모드에 비해 굵은 케이블을 사용하며, 광원으로 LED를 사용
      * LED는 레이저보다 쉽게 구현할 수 있어 멀티모드 케이블과 트랜시버 모두 가격이 싱글모드보다 저렴하다.
      * 케이블 색은 주황색(1G), 하늘색(10G)

* 커넥터
  * 케이블의 끝부분으로, 네트워크 장비나 네트워크 카드에 연결되는 부분
  * 트위스티드 페어 케이블에서는 RJ-45 커넥터를 사용하지만, 광케이블은 다양한 커넥터가 있다.
    * 광케이블에는 주로 LC 커넥터가 사용되고 SC 커넥터가 일부 사용된다.
  * 서버에 광케이블을 사용하는 경우, 네트워크 연결 요청 시 커넥터 타입을 네트워크 담당자에게 알려주어야만 적합한 케이블을 사용할 수 있다.

* 트랜시버
  * 다양한 외부 신호를 컴퓨터 내부의 전기 신호로 바꾸어준다.
  * 케이블이 변경되면 네트워크 장비와 네트워크 카드도 함께 변경해야 하는 문제를 해결하고 서로 다른 다양한 네트워크 표준을 혼용해 사용할 수 있도록 트랜시버를 사용한다.
  * GBIC(GigaBit Interface Converter)
    * 초기 개발된 모듈 이름이나, 일반적으로 트랜시버 전체를 GBIC으로 통칭해 부르기도 한다.
    * SC 타입의 커넥터를 연결할 수 있는 트랜시버
  * 트랜시버가 없이 전용 인터페이스를 사용한다면, 길이나 속도마다 다른 네트워크 장비나 네트워크 인터페이스 카드를 별도로 구비해야하는 문제가 있다.
    * 간단히 트랜시버만 변경하면 통신 길이와 속도를 조절할 수 있어 최근 생산되는 대부분의 네트워크 장비와 네트워크 인터페이스 카드는 트랜시버를 지원하고 있다.

3. 허브
* 케이블과 동일한 1계층에서 동작하는 장비
* 거리가 멀어질수록 줄어드는 전기 신호를 재생성해주고, 여러 대의 장비를 연결할 목적으로 사용한다.
* 현재 거의 사용되지 않는다.
  * 단순히 들어온 신호를 모든 포트로 내보내 네트워크에 접속된 모든 단말이 경쟁하게 되므로 전체 네트워크의 성능이 줄어든다.
  * 패킷이 무한 순환해 네트워크 전체를 마비시키는 루프와 같은 다양한 장애의 원인이 되기도 한다.

4. 스위치
* 허브와 동일하게 여러 장비를 연결하고 통신을 중재하는 2계층 장비
* 허브와 내부 동작 방식은 다르지만, 여러 장비를 연결하고 케이블을 한 곳으로 모아주는 역할을 한다.
* 허브의 역할과 통신을 중재하는 2가지 역할을 모두 포함하므로 **스위칭 허브**라고 불리기도 한다.
* 허브와 달리 MAC 주소를 이해할 수 있어 MAC 주소의 위치를 파악하고 목적지가 연결된 포트로만 전기 신호를 보낸다.

5. 라우터
* OSI 7계층 중 3계층에서 동작하며 먼 거리로 통신할 수 있는 프로토콜로 변환
* 원격지로 쓸데없는 패킷이 전송되지 않도록 브로드캐스트와 멀티캐스트를 컨트롤하고 불분명한 주소로 통신을 시도할 경우, 이를 버린다.
* 정확한 방향으로 패킷이 전송되도록 경로를 지정하고 최적의 경로로 패킷을 포워딩한다.

6. 로드 밸런서
* OSI 7계층 중 4계층에서 동작한다.
* 애플리케이션 프토로콜의 특징을 이해하고 동작하는 7계층 로드 밸런서는 별도로 ADC(Application Delivery Controller)라고 부른다.
* 4계층 포트 주소를 확인하는 동시에 IP 주소를 변경할 수 있다.
* **웹**에 로드 밸런서를 가장 많이 사용한다.
  * 웹 서버를 증설하고 싶을 때 로드 밸런서를 웹 서버 앞에 두고 웹 서버를 여러 대로 늘려준다.
  * 대표 IP는 로드 밸런서가 갖고 로드 밸런서가 각 웹 서버로 패킷의 목적지 IP 주소를 변경해 보내준다.
  * 이런 원리를 이용한다면, 여러 대의 웹 서버가 동시에 동작해 서비스 성능을 높여주는 동시에 일부 웹 서버에 문제가 발생하더라도 빠른 시간 안에 서비스가 복구되도록 도와준다.

7. 보안장비 (방화벽/IPS)
* 보안 장비는 네트워크 장비와는 달리 정보를 잘 제어하고 공격을 방어하는 데 초점이 맞추어져 있다.
* 방화벽
  * OSI 7계층 중 4계층에서 동작하며 방화벽을 통과하는 3,4계층 정보를 확인하고 패킷을 정책과 비교하여 버리거나 포워딩한다.

8. 기타 (모뎀/공유기 등)
* 공유기
  * 2계층 스위치, 3계층 라우터, 4계층 NAT와 간단한 방화벽 기능을 한 곳에 모아놓은 장비
  * 공유기 내부는 스위치 부분, 무선 부분과 라우터 부분 회로로 나뉜다.
* 모뎀
  * 짧은 거리를 통신하는 기술과 먼 거리를 통신할 수 있는 기술이 달라 이 기술들을 변환해주는 장비
* 공유기의 LAN포트와 WAN포트는 모두 일반 이더넷이므로 100m 이상 먼 거리로 데이터를 보내지 못하므로 먼 거리 통신이 가능한 기술로 변환해주는 별도의 모뎀이 필요하다.
